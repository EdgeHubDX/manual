---
layout: default
grand_parent: Pages
parent: 태그 히스토리안
title: 수집모델 종류   
nav_order: 1
---

{: .no_toc }
# 수집모델 종류 
태그 히스토리안 편집기에서는 런타임 기동시 이력 엔진이 수집할 수집모델을 설정할 수 있으며, 여기서 설정된 수집모델에 기반하여 데이터가 수집, 저장됩니다. 수집모델의 종류는 `정주기, 통계값` 저장 그룹이 있으며, 주기적 또는 이벤트 방식으로 저장하는 수집 방법입니다.  


| 수집모델 종류     | 설명 |
|----------|----|
|정주기 | 일정한 주기마다 태그 값을 수집합니다.|
|통계값 | 설정한 태그에 대한 통계 데이터를 주기마다 생성합니다.|

수집모델의 종류에 따른 보고서 및 트랜드 등에서 조회 가능 데이터의 종류는 아래와 같습니다.  

| 수집모델 종류     | 설명 |
|----------|----|
|정주기 | 아날로그(현재값), 디지털(현재상태)|
|통계값 | 아날로그(현재값, 최소값, 최소시간, 최대값, 최대시간, 평균값), 디지털(가동 횟수, 가동 시간, 변경 횟수) |


- TOC
{:toc}


## 정주기  
최소 수집주기는 `1초`로써 빠른 리얼타임성 `데이터 로깅`에 사용되며 주로 `트랜드` 및 `보고서`에서 순시값 조회에 사용합니다. 조회 가능한 데이터는 `현재값(아날로그)`과 `현재상태(디지털)`를 조회할 수 있습니다.  
`런타임 운전시, 정주기 수집모델은 정시`에 수집하여 저장합니다.  
예) 수집주기를 2초로 설정하였을 경우, 매 0, 2, 4초, …, 등 정시에 로깅데이터로 저장합니다.  

`수집 주기 설정`: 주기와 단위를 선택합니다. 각 단위마다 선택 가능한 주기는 다음과 같습니다.

| 단위     | 선택 가능한 주기 |
|----------|----|
|초|1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30|
|분|1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30|
|시|1, 2, 3, 4, 5, 6, 10, 12|
|일|1|

## 통계  
최소 수집주기는 `1분`으로 각종 `통계데이터를 자동연산하여 저장`합니다. 일정 기간 동안의 데이터 현황 파악을 위해 사용되며 주로 보고서나 트랜드에서 통계현황 조회에 사용합니다. 조회 가능한 데이터는 다음과 같습니다.  
`아날로그`: 현재값, 최소값, 최소시간, 최대값, 최대시간, 평균값  
`디지털`: 가동(On)횟수, 가동시간, 변화횟수  
`런타임 운전시`, 통계값 수집모델은 `매분 수집하여 연산하고 저장`합니다.  
예) 수집주기를 5분으로 설정하였고 현재 2분 20초인 경우, 2분 20초부터 3분까지의 데이터를 내부적으로 먼저 연산하고 저장한 뒤, 이후 4분, 5분에는 내부적으로 연산 후, 정시에 갱신합니다. 정시 5분 이후에는 새로운 데이터를 쌓기 시작합니다.  

`수집 주기 설정`: 주기와 단위를 선택합니다. 각 단위마다 선택 가능한 주기는 다음과 같습니다  

| 단위     | 선택 가능한 주기 |
|----------|----|
|분|1, 2, 3, 4, 5, 6, 10, 12, 15, 20, 30|
|시|1, 2, 3, 4, 5, 6, 8, 12|
|일|1 ~ 31|
|월| 1 ~ 12|

## 수집모델 저장기한
수집모델의 저장기한은 외부 설정 파일로 설정할 수 있습니다. `DataWorX 설치경로\Project\Project명\Config\ehTagHistorian.ini`파일을 열어보면, `MAINTAIN_SETTING` 설정이 있습니다.  
각 설정값에 의해 각각의 데이터를 얼마나 저장할지 설정할 수 있습니다.  

| 설정 키     | 수집타입 | 수집모델 단위 | 수집모델 저장기한 단위 |
|----------|----|----|----|
|PERIODIC_SEC_MAINTAIN_PERIOD|	정주기|	초|	일|
|PERIODIC_MIN_MAINTAIN_PERIOD|	정주기|	분|	월|
|PERIODIC_HOUR_MAINTAIN_PERIOD|	정주기|	시|	월|
|PERIODIC_DAY_MAINTAIN_PERIOD|	정주기|	일|	연|
|STATISTICS_1MIN_MAINTAIN_PERIOD|	통계|	분|	월|
|STATISTICS_NMIN_MAINTAIN_PERIOD|	통계|	분|	월|
|STATISTICS_HOUR_MAINTAIN_PERIOD|	통계|	시|	월|
|STATISTICS_DAY_MAINTAIN_PERIOD|	통계|	일|	연|
|STATISTICS_MONTH_MAINTAIN_PERIOD|	통계|	월|	연|

예를들어, `PERIODIC_MIN_MAINTAIN_PERIOD`의 값을 12로 설정할 시, 사용자가 설정한 모든 분단위 수집모델은 월 수로 현재 월 포함 직전 `12개월`치만 조회가 가능합니다.  
현재가 3월이라면 조회 가능한 데이터는 전년도 4월부터 3월까지의 데이터입니다. 설정값을 초과한 데이터는 별도로 저장됩니다.  

수집모델의 저장경로는 사용자가 PostgreSQL을 설치할 당시, 설정한 datadir 경로입니다. DataWorX에서는 기본적으로 `C:\DataWorX\bin\Historian\pgData`를 사용합니다.

